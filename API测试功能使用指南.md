# 🚀 API 测试功能使用指南

## 快速开始

### 1️⃣ 登录管理后台
```
地址: http://localhost:3000/login
用户名: admin
密码: admin
```

### 2️⃣ 进入 API 配置页面
登录后会自动进入管理后台，点击"API 配置"菜单

或直接访问: http://localhost:3000/admin/settings

### 3️⃣ 测试 API 连接

#### 步骤：
1. 在"DeepSeek API Key"输入框中输入您的 API Key
2. 点击绿色的 **"测试连接"** 按钮 ⚡
3. 等待几秒钟（按钮会显示"测试中..."）
4. 查看测试结果

#### 测试成功 ✅
会显示绿色卡片，包含：
- ✓ 成功提示信息
- 📝 AI 的测试回复
- 📊 Token 使用统计

#### 测试失败 ❌
会显示红色卡片，包含：
- ✗ 错误类型（如：API Key 无效）
- 📋 详细错误信息
- 💡 解决建议

### 4️⃣ 保存配置
测试成功后，点击蓝色的 **"保存配置"** 按钮

## 常见错误及解决方法

### ❌ "API Key 无效或已过期"
**原因**: API Key 格式错误或已失效

**解决方法**:
1. 检查 API Key 是否完整复制（通常以 `sk-` 开头）
2. 访问 https://platform.deepseek.com 检查 Key 状态
3. 如果 Key 已过期，生成新的 Key

### ❌ "API 账户余额不足"
**原因**: DeepSeek 账户余额为 0

**解决方法**:
1. 访问 https://platform.deepseek.com
2. 进入账户充值页面
3. 充值后重新测试

### ❌ "API 调用频率超限"
**原因**: 短时间内测试次数过多

**解决方法**:
1. 等待 1-2 分钟后重试
2. 避免频繁点击测试按钮

### ❌ "网络连接失败"
**原因**: 无法连接到 DeepSeek 服务器

**解决方法**:
1. 检查网络连接
2. 检查防火墙设置
3. 如在国内，可能需要特殊网络环境

## 功能特点

### 🔍 实时验证
- 无需保存即可测试
- 立即获得反馈
- 避免保存无效配置

### 📊 详细信息
- 显示使用的模型
- 显示 AI 回复内容
- 显示 Token 消耗情况

### 🛡️ 安全可靠
- 管理员权限验证
- API Key 加密传输
- 最小化 Token 消耗（每次约 20-30 tokens）

### 💡 智能提示
- 自动识别错误类型
- 提供针对性解决方案
- 友好的错误信息

## 测试示例

### 示例 1: 成功测试
```
✅ API 连接测试成功！

模型: deepseek-chat
回复: "你好！这是测试回复。"
Token 使用: 15 (输入) + 8 (输出) = 23 (总计)
```

### 示例 2: 失败测试
```
❌ API Key 无效或已过期

认证失败
```

## 注意事项

⚠️ **重要提示**:
- 每次测试会消耗少量 Token（约 20-30 个）
- 建议在保存前测试，确保 API Key 有效
- 测试失败不会影响已保存的配置
- 不要频繁测试，避免触发频率限制

## 技术支持

如果遇到问题：
1. 查看本文档的"常见错误及解决方法"部分
2. 检查 API_TEST_FEATURE.md 了解技术细节
3. 查看浏览器控制台的错误信息

## 最佳实践

### ✅ 推荐做法
1. 首次配置时先测试再保存
2. 更换 API Key 时先测试新 Key
3. 定期测试确保 API 正常工作
4. 查看 Token 使用统计，了解消耗情况

### ❌ 避免做法
1. 不测试直接保存（可能保存无效 Key）
2. 频繁点击测试按钮（浪费 Token）
3. 使用他人的 API Key（安全风险）
4. 在测试中输入敏感信息

## 更新内容

**版本**: v1.1  
**更新日期**: 2025-12-31

**新功能**:
- ✨ 新增"测试连接"按钮
- 📊 新增测试结果详细展示
- 🔍 新增智能错误识别
- 💰 新增 Token 使用统计

---

🎉 现在您可以放心地测试和配置 DeepSeek API 了！


