# 可复用_技术_折叠面板实现方案

## 需求描述
在侧边栏或管理界面中，实现一个可折叠的区域（如“计划模板管理”），点击标题可展开/收起内容，同时改变图标状态（向下/向上箭头）。

## 核心实现逻辑

### 1. 状态管理
在父组件（如页面级组件 `DashboardPage`）中管理折叠状态，以便状态可以跨组件传递或与其他UI元素联动。

```typescript
// DashboardPage.tsx
// 定义状态：默认 false (不折叠/展开) 或 true (折叠)
const [isTemplateCollapsed, setIsTemplateCollapsed] = useState(false);

// 传递给子组件
<DashboardSidebar 
    isTemplateCollapsed={isTemplateCollapsed}
    onToggleTemplate={() => setIsTemplateCollapsed(!isTemplateCollapsed)}
    ... 
/>
```

### 2. UI 组件实现
在子组件（`DashboardSidebar`）中，使用状态控制渲染。

```typescript
// DashboardSidebar.tsx
interface DashboardSidebarProps {
    isTemplateCollapsed: boolean;
    onToggleTemplate: () => void;
    // ... 其他 props
}

export function DashboardSidebar({ isTemplateCollapsed, onToggleTemplate }: DashboardSidebarProps) {
    return (
        <div className="flex flex-col h-full">
            {/* 标题栏 - 点击触发切换 */}
            <div 
                className="flex items-center justify-between p-4 cursor-pointer hover:bg-gray-50 bg-gray-50/50 border-b border-gray-100"
                onClick={onToggleTemplate}
            >
                <div className="flex items-center gap-2">
                    <Menu size={18} className="text-primary-500" />
                    <span className="font-bold text-gray-800">模板管理</span>
                </div>
                {/* 根据状态显示不同图标 */}
                {isTemplateCollapsed ? (
                    <ChevronDown size={16} className="text-gray-400" />
                ) : (
                    <ChevronUp size={16} className="text-gray-400" />
                )}
            </div>

            {/* 内容区域 - 根据状态条件渲染 */}
            {!isTemplateCollapsed && (
                <div className="flex-1 overflow-y-auto p-4 custom-scrollbar">
                     {/* 具体的列表组件 */}
                    <SubjectList ... />
                </div>
            )}
        </div>
    );
}
```

### 3. CSS 优化 (可选)
为了提升体验，可以添加过渡动画。
如果使用 Tailwind CSS，可以使用 `transition-all` 和 `max-h` 配合实现平滑展开。

```tsx
// 动画版实现示例
<div className={`transition-all duration-300 ease-in-out overflow-hidden ${isTemplateCollapsed ? 'max-h-0' : 'max-h-[500px]'}`}>
    {/* 内容 */}
</div>
```

## 复用建议
1.  **状态提升**：尽量将折叠状态放在页面级组件，这样如果有多个折叠面板，可以实现“手风琴”效果（展开一个自动收起另一个）。
2.  **通用组件**：如果折叠区域很多，可以封装一个 `CollapsibleSection` 组件，接收 `title`, `isOpen`, `onToggle`, `children` 作为参数。

```typescript
// 通用组件示例
const CollapsibleSection = ({ title, isOpen, onToggle, children }) => (
    <div className="border rounded-xl overflow-hidden">
        <div onClick={onToggle} className="flex justify-between p-3 bg-gray-50 cursor-pointer">
            <span>{title}</span>
            {isOpen ? <ChevronUp /> : <ChevronDown />}
        </div>
        {isOpen && <div className="p-3 bg-white">{children}</div>}
    </div>
);
```
